var InstantClick=function(t,e){function i(t){var e=t.indexOf("#");return 0>e?t:t.substr(0,e)}function n(t){for(;"A"!=t.nodeName;)t=t.parentNode;return t}function r(t,e){for(var i=0;i<B[t].length;i++)B[t][i](e)}function a(e,n,a,o){if(t.title=e,t.documentElement.replaceChild(n,t.body),a){if(history.pushState(null,null,a),e=a.indexOf("#"),e=e>-1&&t.getElementById(a.substr(e+1)),n=0,e)for(;e.offsetParent;)n+=e.offsetTop,e=e.offsetParent;scrollTo(0,n),m=i(a)}else scrollTo(0,o);f(),O.done(),r("change",!1)}function o(t){u(n(t.target).href)}function s(t){t=n(t.target),t.addEventListener("mouseout",h),T?(v=t.href,g=setTimeout(u,T)):u(t.href)}function d(t){t=n(t.target),w?t.removeEventListener("mousedown",o):t.removeEventListener("mouseover",s),u(t.href)}function l(t){1<t.which||t.metaKey||t.ctrlKey||(t.preventDefault(),p(n(t.target).href))}function h(){g?(clearTimeout(g),g=!1):H&&!I&&(y.abort(),I=H=!1)}function c(){if(!(4>y.readyState)&&0!=y.status){if(M.ready=+new Date-M.start,r("receive"),y.getResponseHeader("Content-Type").match(/\/(x|ht|xht)ml/)){var e=t.implementation.createHTMLDocument("");e.documentElement.innerHTML=y.responseText,A=e.title,C=e.body;var n=i(N);k[n]={body:C,title:A,scrollY:n in k?k[n].scrollY:0};for(var a,e=e.head.children,n=0,o=e.length-1;o>=0;o--)if(a=e[o],a.hasAttribute("data-instant-track")){a=a.getAttribute("href")||a.getAttribute("src")||a.innerHTML;for(var s=Y.length-1;s>=0;s--)Y[s]==a&&n++}n!=Y.length&&(x=!0)}else x=!0;I&&(I=!1,p(N))}}function f(n){for(var r,a=t.getElementsByTagName("a"),h=e.protocol+"//"+e.host,c=a.length-1;c>=0;c--){r=a[c];var f;if(!((f=r.target)||(f=r.hasAttribute("download"))||(f=0!=r.href.indexOf(h+"/"))||(f=-1<r.href.indexOf("#")&&i(r.href)==m)))if(b){t:{f=r;do{if(!f.hasAttribute)break;if(f.hasAttribute("data-no-instant"))break;if(f.hasAttribute("data-instant")){f=!0;break t}}while(f=f.parentNode);f=!1}f=!f}else t:{f=r;do{if(!f.hasAttribute)break;if(f.hasAttribute("data-instant"))break;if(f.hasAttribute("data-no-instant")){f=!0;break t}}while(f=f.parentNode);f=!1}f||(r.addEventListener("touchstart",d),w?r.addEventListener("mousedown",o):r.addEventListener("mouseover",s),r.addEventListener("click",l))}if(!n)for(n=t.body.getElementsByTagName("script"),c=0,j=n.length;j>c;c++)a=n[c],a.hasAttribute("data-no-instant")||(r=t.createElement("script"),a.src&&(r.src=a.src),a.innerHTML&&(r.innerHTML=a.innerHTML),h=a.parentNode,f=a.nextSibling,h.removeChild(a),h.insertBefore(r,f))}function u(t){(w||!("display"in M&&100>+new Date-(M.start+M.display)))&&(g&&(clearTimeout(g),g=!1),t||(t=v),(!H||t!=N&&!I)&&(H=!0,I=!1,N=t,x=C=!1,M={start:+new Date},r("fetch"),y.open("GET",t),y.send()))}function p(t){"display"in M||(M.display=+new Date-M.start),g?N&&N!=t?e.href=t:(u(t),O.start(0,!0),r("wait"),I=!0):!H||I?e.href=t:x?e.href=N:C?(k[m].scrollY=pageYOffset,I=H=!1,a(A,C,N)):(O.start(0,!0),r("wait"),I=!0)}var m,v,g,y,b,w,T,E=navigator.userAgent,L="createTouch"in t,k={},N=!1,A=!1,x=!1,C=!1,M={},H=!1,I=!1,Y=[],B={fetch:[],receive:[],wait:[],change:[]},O=function(){function e(e,a){h=e,t.getElementById(s.id)&&t.body.removeChild(s),s.style.opacity="1",t.getElementById(s.id)&&t.body.removeChild(s),r(),a&&setTimeout(i,0),clearTimeout(c),c=setTimeout(n,500)}function i(){h=10,r()}function n(){h+=1+2*Math.random(),h>=98?h=98:c=setTimeout(n,500),r()}function r(){d.style[l]="translate("+h+"%)",t.getElementById(s.id)||t.body.appendChild(s)}function a(){t.getElementById(s.id)?(clearTimeout(c),h=100,r(),s.style.opacity="0"):(e(100==h?0:h),setTimeout(a,0))}function o(){s.style.left=pageXOffset+"px",s.style.width=innerWidth+"px",s.style.top=pageYOffset+"px";var t="orientation"in window&&90==Math.abs(orientation);s.style[l]="scaleY("+innerWidth/screen[t?"height":"width"]*2+")"}var s,d,l,h,c;return{init:function(){s=t.createElement("div"),s.id="instantclick",d=t.createElement("div"),d.id="instantclick-bar",d.className="instantclick-bar",s.appendChild(d);var e=["Webkit","Moz","O"];if(l="transform",!(l in d.style))for(var i=0;3>i;i++)e[i]+"Transform"in d.style&&(l=e[i]+"Transform");var n="transition";if(!(n in d.style))for(i=0;3>i;i++)e[i]+"Transition"in d.style&&(n="-"+e[i].toLowerCase()+"-"+n);e=t.createElement("style"),e.innerHTML="#instantclick{position:"+(L?"absolute":"fixed")+";top:0;left:0;width:100%;pointer-events:none;z-index:2147483647;"+n+":opacity .25s .1s}.instantclick-bar{background:#29d;width:100%;margin-left:-100%;height:2px;"+n+":all .25s}",t.head.appendChild(e),L&&(o(),addEventListener("resize",o),addEventListener("scroll",o))},start:e,done:a}}(),S="pushState"in history&&(!E.match("Android")||E.match("Chrome/"))&&"file:"!=e.protocol;return{supported:S,init:function(){if(!m)if(S){for(var n=arguments.length-1;n>=0;n--){var o=arguments[n];!0===o?b=!0:"mousedown"==o?w=!0:"number"==typeof o&&(T=o)}m=i(e.href),k[m]={body:t.body,title:t.title,scrollY:pageYOffset};for(var s,o=t.head.children,n=o.length-1;n>=0;n--)s=o[n],s.hasAttribute("data-instant-track")&&(s=s.getAttribute("href")||s.getAttribute("src")||s.innerHTML,Y.push(s));y=new XMLHttpRequest,y.addEventListener("readystatechange",c),f(!0),O.init(),r("change",!0),addEventListener("popstate",function(){var t=i(e.href);t!=m&&(t in k?(k[m].scrollY=pageYOffset,m=t,a(k[t].title,k[t].body,!1,k[t].scrollY)):e.href=e.href)})}else r("change",!0)},on:function(t,e){B[t].push(e)}}}(document,location);!function(t){"use strict";t.fn.fitVids=function(e){var i={customSelector:null};if(!document.getElementById("fit-vids-style")){var n=document.head||document.getElementsByTagName("head")[0],r=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",a=document.createElement("div");a.innerHTML='<p>x</p><style id="fit-vids-style">'+r+"</style>",n.appendChild(a.childNodes[1])}return e&&t.extend(i,e),this.each(function(){var e=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];i.customSelector&&e.push(i.customSelector);var n=t(this).find(e.join(","));n=n.not("object object"),n.each(function(){var e=t(this);if(!("embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){e.css("height")||e.css("width")||!isNaN(e.attr("height"))&&!isNaN(e.attr("width"))||(e.attr("height",9),e.attr("width",16));var i="object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height(),n=isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10),r=i/n;if(!e.attr("id")){var a="fitvid"+Math.floor(999999*Math.random());e.attr("id",a)}e.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*r+"%"),e.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto),$(function(){return $(".page-single article").find("h2, h3, h4, h5, h6").each(function(t,e){var i,n;return i=$(e),n=i.attr("id")?i.attr("id"):i.parent().attr("id"),n?i.append($("<a />").addClass("header-link icon-link").attr("href","#"+n).html("")):void 0})});